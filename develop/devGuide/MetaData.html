<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Metadata</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Parallel IO (IO)" href="IO.html" />
    <link rel="prev" title="Domain Decomposition (Decomp)" href="Decomp.html" />
    <link href="../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            OMEGA
          </a>
              <div class="version">
                develop
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/QuickStart.html">Quick Start for Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/OmegaBuild.html">CMake-based Omega Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/DataTypes.html">Data Types and Precision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/MachEnv.html">Machine Environment (MachEnv)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/Config.html">Model Configuration (Config)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/Broadcast.html">Omega Broadcast</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/Logging.html">Omega Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/Decomp.html">Domain Decomposition (Decomp)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/MetaData.html">Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/IO.html">Parallel IO (IO)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/IOField.html">IO Fields (IOField)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/Halo.html">Halo Exchanges (Halo)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/HorzMesh.html">Horizontal Mesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/HorzOperators.html">Horizontal Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/TimeMgr.html">Time Manager (TimeMgr)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/Reductions.html">Global Reductions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer's guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="QuickStart.html">Quick Start for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="CondaEnv.html">Development Conda Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="Linting.html">Linting Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="Docs.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="BuildDocs.html">Building the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="DataTypes.html">Data Types and Precision</a></li>
<li class="toctree-l1"><a class="reference internal" href="DataTypes.html#arrays-and-kokkos">Arrays and Kokkos</a></li>
<li class="toctree-l1"><a class="reference internal" href="MachEnv.html">Machine Environment (MachEnv)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Config.html">Model Configuration (Config)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Broadcast.html">Omega Broadcast</a></li>
<li class="toctree-l1"><a class="reference internal" href="CMakeBuild.html">Omega Build with CMake</a></li>
<li class="toctree-l1"><a class="reference internal" href="Logging.html">Developing Omega Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="Decomp.html">Domain Decomposition (Decomp)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Metadata</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#metadata-code-structure">MetaData Code Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#class-descriptions">Class Descriptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#metadata-class">1. MetaData Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metadim-class">2. MetaDim Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metagroup-class">3. MetaGroup Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="#arraymetadata-class">4. ArrayMetaData Class</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#function-naming-convention">Function Naming Convention</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#specific-conventions">Specific Conventions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#return-type-and-return-code">Return Type and Return Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inheriting-metadata-class">Inheriting MetaData class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-destroy-a-metadata-instance">Create/Destroy a MetaData Instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-remove-a-metadata-to-from-a-metadata-instance">Add/Remove a Metadata to/from a MetaData Instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#retreive-a-metadata-from-a-metadata-instance">Retreive a Metadata from a MetaData Instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#retreive-a-metadata-instance">Retreive a MetaData Instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-destroy-a-metadim-instance">Create/Destroy a MetaDim Instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#retreive-dimension-from-a-metadim-instance">Retreive Dimension from a MetaDim Instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-destroy-a-metagroup-instance">Create/Destroy a MetaGroup Instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-retrieve-or-remove-a-metadata-instance-from-a-metagroup-instance">Add, Retrieve, or Remove a MetaData Instance from a MetaGroup Instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#utilities">Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#has-static-method"><code class="docutils literal notranslate"><span class="pre">has</span></code> static method</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-static-method"><code class="docutils literal notranslate"><span class="pre">get</span></code> static method</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="IO.html">Parallel IO (IO)</a></li>
<li class="toctree-l1"><a class="reference internal" href="IOField.html">IO Fields (IOField)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Halo.html">Halo Exchanges (Halo)</a></li>
<li class="toctree-l1"><a class="reference internal" href="HorzMesh.html">Horizontal Mesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="HorzOperators.html">Horizontal Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="TimeMgr.html">Time Manager (TimeMgr)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Reductions.html">Global Reductions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Design documents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../design/Broadcast.html">Broadcast</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/Config.html">Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/DataTypes.html">DataTypes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/Decomp.html">Decomp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/Driver.html">Driver and Component Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/Halo.html">Halo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/HorzMeshClass.html">Horizontal Mesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/Logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/MachEnv.html">MachineEnv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/Metadata.html">Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/IO.html">Input/Output (IO)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/IOStreams.html">IOStreams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/Reductions.html">Global Reductions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/ShallowWaterOmega0.html">Omega v0: Shallow Water</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/State.html">State</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/AuxiliaryVariables.html">Auxiliary variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/TimeMgr.html">TimeManager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/Timers.html">Timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/TimeStepping.html">Time Stepping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/Tracers.html">Tracer infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/OmegaDesignTemplate.html">Template: MyClassOrModuleName</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OMEGA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Metadata</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/devGuide/MetaData.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="metadata">
<span id="omega-dev-metadata"></span><h1>Metadata<a class="headerlink" href="#metadata" title="Permalink to this heading"></a></h1>
<section id="metadata-code-structure">
<h2>MetaData Code Structure<a class="headerlink" href="#metadata-code-structure" title="Permalink to this heading"></a></h2>
<p>The MetaData feature in Ometa is constructed using four distinct C++ classes.
These classes are designed to facilitate the organization and retrieval of
metadata throughout the Omega source code.</p>
<section id="class-descriptions">
<h3>Class Descriptions<a class="headerlink" href="#class-descriptions" title="Permalink to this heading"></a></h3>
<section id="metadata-class">
<h4>1. MetaData Class<a class="headerlink" href="#metadata-class" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Purpose</strong>: Serves as the central class, holding key-value pair metadata
for variables and other entities such as Ometa code or
the model itself.</p></li>
<li><p><strong>Structure</strong>: Contains a static member that maintains references to all
instances of the class, allowing for universal access
throughout the codebase.</p></li>
</ul>
</section>
<section id="metadim-class">
<h4>2. MetaDim Class<a class="headerlink" href="#metadim-class" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Purpose</strong>: Provides a structured representation of dimension information,
primarily for array-type entities.</p></li>
<li><p><strong>Structure</strong>: Defines dimension-related attributes and functionalities to
aid in handling array data.</p></li>
</ul>
</section>
<section id="metagroup-class">
<h4>3. MetaGroup Class<a class="headerlink" href="#metagroup-class" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Purpose</strong>: Offers a mechanism to aggregate certain MetaData instances for
streamlined management and retrieval.</p></li>
<li><p><strong>Structure</strong>: Facilitates grouping and accessing grouped metadata,
enhancing organization and accessibility.</p></li>
</ul>
</section>
<section id="arraymetadata-class">
<h4>4. ArrayMetaData Class<a class="headerlink" href="#arraymetadata-class" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Purpose</strong>: Specializes the MetaData class to handle array-type variables
specifically, ensuring that required metadata is consistently
provided.</p></li>
<li><p><strong>Structure</strong>: Inherits from MetaData and introduces additional constraints
and functionalities pertinent to array-type data.</p></li>
</ul>
</section>
</section>
</section>
<section id="function-naming-convention">
<h2>Function Naming Convention<a class="headerlink" href="#function-naming-convention" title="Permalink to this heading"></a></h2>
<p>The naming of functions within these classes adheres to the LLVM coding style
and is categorized based on the nature of the operation and the type of member
variables they interact with. Function names begin with a lowercase letter.</p>
<section id="specific-conventions">
<h3>Specific Conventions<a class="headerlink" href="#specific-conventions" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Static Member Access</strong>: Functions interacting with static members are
typically short verbs. For instance, <code class="docutils literal notranslate"><span class="pre">get(&quot;Name&quot;);</span></code> is utilized
to instantiate a MetaData class.</p></li>
<li><p><strong>Non-Static Member Access</strong>: Functions dealing with non-static members often
conclude with a specific descriptor indicating the targeted
information, e.g., <code class="docutils literal notranslate"><span class="pre">getEntry(&quot;Name&quot;,</span> <span class="pre">Var);</span></code> retrieves
metadata from a MetaData instance.</p></li>
<li><p><strong>Instance Management</strong>: The terms <code class="docutils literal notranslate"><span class="pre">create/destroy</span></code> are designated for
functions that instantiate or delete an instance, respectively.</p></li>
<li><p><strong>Instance Retrieval</strong>: The <code class="docutils literal notranslate"><span class="pre">get</span></code> function is employed to obtain an instance
from the static member holding all instances.</p></li>
<li><p><strong>Existence Check</strong>: The <code class="docutils literal notranslate"><span class="pre">has(&quot;Name&quot;);</span></code> function returns a boolean value,
indicating whether an instance named “Name” exists.</p></li>
</ul>
</section>
</section>
<section id="return-type-and-return-code">
<h2>Return Type and Return Code<a class="headerlink" href="#return-type-and-return-code" title="Permalink to this heading"></a></h2>
<p>The create and get static functions are designed to return a <code class="docutils literal notranslate"><span class="pre">shared_ptr</span></code> of
the class instance. This design choice simplifies the usage and enhances
code readability by allowing the use of the auto keyword, eliminating the
need for repeatedly specifying the <code class="docutils literal notranslate"><span class="pre">shared_ptr</span></code> type.</p>
<p>Other Functions typically returns an integer code indicating the operation
status representing a successful operation with no errors. Negative Values
correspond to specific error cases, each value indicating a distinct error
type.</p>
</section>
<section id="inheriting-metadata-class">
<h2>Inheriting MetaData class<a class="headerlink" href="#inheriting-metadata-class" title="Permalink to this heading"></a></h2>
<p>The MetaData class is a versatile construct intended for attaching metadata
not only to model variables but also to other elements related to the model
and code. It serves as a foundational class for metadata management.</p>
<p>The ArrayMetaData class is a specialized version of the MetaData class,
focusing specifically on array-type model variables. It defines a singular
method, <code class="docutils literal notranslate"><span class="pre">create</span></code>, which is an overridden version of the one in the MetaData
class. The create function in ArrayMetaData is tailored to ensure that all
necessary metadata for array-type variables is provided upon creation.
This enforcement guarantees the integrity and completeness of metadata
for array-type model variables.</p>
</section>
<section id="create-destroy-a-metadata-instance">
<h2>Create/Destroy a MetaData Instance<a class="headerlink" href="#create-destroy-a-metadata-instance" title="Permalink to this heading"></a></h2>
<p>To add or retrieve metadata for a variable or other entity such as code or
a model, users have to create a MetaData instance for the variable or entity.</p>
<p>There are three ways to create a MetaData Instance. The simplest way is to use
the create method with a metadata name string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auto</span> <span class="n">Data1</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">::</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;MyVar1&quot;</span><span class="p">);</span>

</pre></div>
</div>
<p>The create method is a static function that returns a C++ <code class="docutils literal notranslate"><span class="pre">shared_ptr</span></code> object
pointing to the MetaData instance named “MyVar1”.</p>
<p>If the specified name already exists, a runtime error is thrown.</p>
<p>Once it is created successfully, users can add metadata later, as explained
in the section below.</p>
<p>Another way to create a MetaData Instance is to use the create function with
<code class="docutils literal notranslate"><span class="pre">std::make_pair</span></code>, consisting of name-value pairs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auto</span> <span class="n">Data2</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">::</span><span class="n">create</span><span class="p">(</span>
                <span class="s2">&quot;MyVar2&quot;</span><span class="p">,</span>
                <span class="p">{</span>
                    <span class="n">std</span><span class="p">::</span><span class="n">make_pair</span><span class="p">(</span><span class="s2">&quot;Meta1&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                    <span class="n">std</span><span class="p">::</span><span class="n">make_pair</span><span class="p">(</span><span class="s2">&quot;Meta2&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">),</span>
                    <span class="n">std</span><span class="p">::</span><span class="n">make_pair</span><span class="p">(</span><span class="s2">&quot;Meta3&quot;</span><span class="p">,</span> <span class="s2">&quot;MyValue3&quot;</span><span class="p">),</span>
                <span class="p">}</span>
            <span class="p">);</span>
</pre></div>
</div>
<p>This allows multiple key-value pairs to be added at once during creation.</p>
<p>In the case of an array-type variable, it is mandatory to add a certain set
of key-value pairs. Therefore, users should use the following method to create
array-type variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">auto</span> <span class="n">Data3</span> <span class="o">=</span> <span class="n">ArrayMetaData</span><span class="p">::</span><span class="n">create</span><span class="p">(</span>
                    <span class="s2">&quot;MyVar3&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Description&quot;</span><span class="p">,</span> <span class="o">///</span> <span class="n">long</span> <span class="n">Name</span> <span class="ow">or</span> <span class="n">description</span>
                    <span class="s2">&quot;Units&quot;</span><span class="p">,</span>       <span class="o">///</span> <span class="n">units</span>
                    <span class="s2">&quot;StdName&quot;</span><span class="p">,</span>     <span class="o">///</span> <span class="n">CF</span> <span class="n">standard</span> <span class="n">Name</span>
                    <span class="n">std</span><span class="p">::</span><span class="n">numeric_limits</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">::</span><span class="nb">min</span><span class="p">(),</span> <span class="o">///</span> <span class="nb">min</span> <span class="n">valid</span> <span class="n">value</span>
                    <span class="n">std</span><span class="p">::</span><span class="n">numeric_limits</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">::</span><span class="nb">max</span><span class="p">(),</span> <span class="o">///</span> <span class="nb">max</span> <span class="n">valid</span> <span class="n">value</span>
                    <span class="n">FILL_VALUE</span><span class="p">,</span>    <span class="o">///</span> <span class="n">scalar</span> <span class="n">used</span> <span class="k">for</span> <span class="n">undefined</span> <span class="n">entries</span>
                    <span class="mi">1</span><span class="p">,</span>             <span class="o">///</span> <span class="n">number</span> <span class="n">of</span> <span class="n">dimensions</span>
                    <span class="n">Dimensions</span>     <span class="o">///</span> <span class="n">dim</span> <span class="n">pointers</span>
            <span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">destroy</span></code> function, used with the metadata name, removes a MetaData
instance so that the instance can no longer be accessed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">ret</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">::</span><span class="n">destroy</span><span class="p">(</span><span class="s2">&quot;MyVar3&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>The return value of the <code class="docutils literal notranslate"><span class="pre">destroy</span></code> function is zero on success, -1 when there
is no metadata by that name, and -2 when the destroy action fails for
other reasons.</p>
</section>
<section id="add-remove-a-metadata-to-from-a-metadata-instance">
<h2>Add/Remove a Metadata to/from a MetaData Instance<a class="headerlink" href="#add-remove-a-metadata-to-from-a-metadata-instance" title="Permalink to this heading"></a></h2>
<p>To add metadata to a <code class="docutils literal notranslate"><span class="pre">MetaData</span></code> instance, the <code class="docutils literal notranslate"><span class="pre">addEntry</span></code> function is used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="nb">int</span> <span class="n">ret</span><span class="p">;</span>
    <span class="n">const</span> <span class="n">R8</span> <span class="n">AValue</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">;</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">Data1</span><span class="o">-&gt;</span><span class="n">addEntry</span><span class="p">(</span><span class="s2">&quot;NewMeta&quot;</span><span class="p">,</span> <span class="n">AValue</span><span class="p">);</span>
</pre></div>
</div>
<p>The following data types are allowed as metadata values:</p>
<ul class="simple">
<li><p>I4</p></li>
<li><p>I8</p></li>
<li><p>R4</p></li>
<li><p>R8</p></li>
<li><p>std::string</p></li>
<li><p>bool</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">addEntry</span></code> returns an integer value of zero upon success and returns -1
if the metadata name already exists.</p>
<p>To remove metadata from a MetaData instance, the <code class="docutils literal notranslate"><span class="pre">removeEntry</span></code> function
is used.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="nb">int</span> <span class="n">ret</span><span class="p">;</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">Data1</span><span class="o">-&gt;</span><span class="n">removeEntry</span><span class="p">(</span><span class="s2">&quot;NewMeta&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">removeEntry</span></code> returns an integer value of zero upon success, -1 when there
is no metadata by that name, and -2 when the removal action fails for other
reasons.</p>
</section>
<section id="retreive-a-metadata-from-a-metadata-instance">
<h2>Retreive a Metadata from a MetaData Instance<a class="headerlink" href="#retreive-a-metadata-from-a-metadata-instance" title="Permalink to this heading"></a></h2>
<p>Users can retrieve metadata using the <code class="docutils literal notranslate"><span class="pre">getEntry</span></code> function.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">R8</span> <span class="n">R8Value</span><span class="p">;</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">Data1</span><span class="o">-&gt;</span><span class="n">getEntry</span><span class="p">(</span><span class="s2">&quot;NewMeta&quot;</span><span class="p">,</span> <span class="n">R8Value</span><span class="p">);</span>
</pre></div>
</div>
<p>The first argument of <code class="docutils literal notranslate"><span class="pre">getEntry</span></code> is the name of the metadata. The second
argument is passed by reference, allowing <code class="docutils literal notranslate"><span class="pre">getEntry</span></code> to place
the metadata’s value into it.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">getEntry</span></code> is overloaded with several methods, each having
different data types for the second argument. It is the user’s responsibility
to match the metadata name with the correct data type of the value. Otherwise,
the function may throw a type-casting error exception.</p>
</section>
<section id="retreive-a-metadata-instance">
<h2>Retreive a MetaData Instance<a class="headerlink" href="#retreive-a-metadata-instance" title="Permalink to this heading"></a></h2>
<p>To retrieve an instance of MetaData for a variable or another entity, such
as code, the <code class="docutils literal notranslate"><span class="pre">get</span></code> static function can be used.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">auto</span> <span class="n">Data4</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">::</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;MyVar2&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">get</span></code> method is a static function that returns a C++ <code class="docutils literal notranslate"><span class="pre">shared_ptr</span></code> object
in the same way as the create function.</p>
</section>
<section id="create-destroy-a-metadim-instance">
<h2>Create/Destroy a MetaDim Instance<a class="headerlink" href="#create-destroy-a-metadim-instance" title="Permalink to this heading"></a></h2>
<p>In the above example for array-type variables, users need to add metadata for
the dimension information of the variable. In Omega, the <code class="docutils literal notranslate"><span class="pre">MetaDim</span></code> class is
used for representing dimensions.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">create</span></code> function returns a C++ <code class="docutils literal notranslate"><span class="pre">shared_ptr</span></code> object to the MetaDim
instance.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">I4</span> <span class="n">DimLength</span><span class="p">{</span><span class="mi">3</span><span class="p">};</span>
<span class="n">auto</span> <span class="n">Dim1</span> <span class="o">=</span> <span class="n">MetaDim</span><span class="p">::</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;MyDim1&quot;</span><span class="p">,</span> <span class="n">DimLength</span><span class="p">);</span>
<span class="nb">int</span> <span class="n">ret</span>   <span class="o">=</span> <span class="n">MetaDim</span><span class="p">::</span><span class="n">destroy</span><span class="p">(</span><span class="s2">&quot;MyDim1&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>In case the specified name already exists, a runtime error is thrown.</p>
</section>
<section id="retreive-dimension-from-a-metadim-instance">
<h2>Retreive Dimension from a MetaDim Instance<a class="headerlink" href="#retreive-dimension-from-a-metadim-instance" title="Permalink to this heading"></a></h2>
<p>Users can retrieve dimension information using <code class="docutils literal notranslate"><span class="pre">getLength</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">I4</span> <span class="n">DimLength</span><span class="p">;</span>
    <span class="n">Dim1</span><span class="o">-&gt;</span><span class="n">getLength</span><span class="p">(</span><span class="n">DimLength</span><span class="p">);</span>
</pre></div>
</div>
<p>The argument is passed by reference, allowing <code class="docutils literal notranslate"><span class="pre">getLength</span></code> to assign the length
value to it.</p>
<p>As of now, the return value is always zero.</p>
</section>
<section id="create-destroy-a-metagroup-instance">
<h2>Create/Destroy a MetaGroup Instance<a class="headerlink" href="#create-destroy-a-metagroup-instance" title="Permalink to this heading"></a></h2>
<p>Because lists of contents in the model configuration file can become lengthy,
it is useful to define and maintain a metadata group. This group is essentially
a shorthand for a set of common fields (e.g., <code class="docutils literal notranslate"><span class="pre">meshFields</span></code> or <code class="docutils literal notranslate"><span class="pre">prognosticVars</span></code>).
Common groups of fields can be defined as metadata groups (MetaGroup). Please
see the metadata design document for more details.</p>
<p>Similarly to the MetaData and MetaDim classes explained above, the create
function returns a C++ <code class="docutils literal notranslate"><span class="pre">shared_ptr</span></code> object to the MetaGroup instance.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auto</span> <span class="n">Group1</span> <span class="o">=</span> <span class="n">MetaGroup</span><span class="p">::</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;MyGroup1&quot;</span><span class="p">);</span>
<span class="nb">int</span> <span class="n">ret</span>     <span class="o">=</span> <span class="n">MetaGroup</span><span class="p">::</span><span class="n">destroy</span><span class="p">(</span><span class="s2">&quot;MyGroup1&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>In case the specified name already exists, a runtime error is thrown.</p>
</section>
<section id="add-retrieve-or-remove-a-metadata-instance-from-a-metagroup-instance">
<h2>Add, Retrieve, or Remove a MetaData Instance from a MetaGroup Instance<a class="headerlink" href="#add-retrieve-or-remove-a-metadata-instance-from-a-metagroup-instance" title="Permalink to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">ret</span><span class="p">;</span>
<span class="n">const</span> <span class="n">std</span><span class="p">::</span><span class="n">string</span> <span class="n">FieldName</span><span class="p">{</span><span class="s2">&quot;MyField&quot;</span><span class="p">};</span>

<span class="n">auto</span> <span class="n">Data1</span>  <span class="o">=</span> <span class="n">MetaData</span><span class="p">::</span><span class="n">create</span><span class="p">(</span><span class="n">FieldName</span><span class="p">);</span>

<span class="n">ret</span>         <span class="o">=</span> <span class="n">Group1</span><span class="o">-&gt;</span><span class="n">addField</span><span class="p">(</span><span class="n">FieldName</span><span class="p">);</span>
<span class="n">auto</span> <span class="n">Data2</span>  <span class="o">=</span> <span class="n">Group1</span><span class="o">-&gt;</span><span class="n">getField</span><span class="p">(</span><span class="n">FieldName</span><span class="p">):</span>
<span class="n">ret</span>         <span class="o">=</span> <span class="n">Group1</span><span class="o">-&gt;</span><span class="n">removeField</span><span class="p">(</span><span class="n">FieldName</span><span class="p">):</span>
</pre></div>
</div>
<p>To add, retrieve, or remove a field (a MetaData instance) from
a <code class="docutils literal notranslate"><span class="pre">MetaGroup</span> <span class="pre">shared_ptr</span></code>, the <code class="docutils literal notranslate"><span class="pre">addField</span></code>, <code class="docutils literal notranslate"><span class="pre">getField</span></code>, and <code class="docutils literal notranslate"><span class="pre">removeField</span></code>
methods can be used, respectively. <code class="docutils literal notranslate"><span class="pre">addField</span></code> and <code class="docutils literal notranslate"><span class="pre">removeField</span></code> return zero
upon success, -1 if the group already contains the field name, and -2 if
another error occurs. <code class="docutils literal notranslate"><span class="pre">getField</span></code> throws an error if no field name is
specified in the argument.</p>
</section>
<section id="utilities">
<h2>Utilities<a class="headerlink" href="#utilities" title="Permalink to this heading"></a></h2>
<p>All the classes described here have the following static utility functions:</p>
<section id="has-static-method">
<h3><code class="docutils literal notranslate"><span class="pre">has</span></code> static method<a class="headerlink" href="#has-static-method" title="Permalink to this heading"></a></h3>
<p>This static method returns a boolean value indicating whether an instance
specified by the argument string exists.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bool</span> <span class="n">ret1</span><span class="p">,</span> <span class="n">ret2</span><span class="p">,</span> <span class="n">ret3</span><span class="p">;</span>
<span class="n">ret1</span>    <span class="o">=</span> <span class="n">MetaData</span><span class="p">::</span><span class="n">has</span><span class="p">(</span><span class="s2">&quot;MyVar&quot;</span><span class="p">);</span>
<span class="n">ret2</span>    <span class="o">=</span> <span class="n">MetaDim</span><span class="p">::</span><span class="n">has</span><span class="p">(</span><span class="s2">&quot;MyDim&quot;</span><span class="p">);</span>
<span class="n">ret3</span>    <span class="o">=</span> <span class="n">MetaGroup</span><span class="p">::</span><span class="n">has</span><span class="p">(</span><span class="s2">&quot;MyGroup&quot;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="get-static-method">
<h3><code class="docutils literal notranslate"><span class="pre">get</span></code> static method<a class="headerlink" href="#get-static-method" title="Permalink to this heading"></a></h3>
<p>This static method returns an instance of the class specified by
the argument string.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auto</span> <span class="n">Data</span>   <span class="o">=</span> <span class="n">MetaData</span><span class="p">::</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;MyVar&quot;</span><span class="p">);</span>
<span class="n">auto</span> <span class="n">Dim</span>    <span class="o">=</span> <span class="n">MetaDim</span><span class="p">::</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;MyDim&quot;</span><span class="p">);</span>
<span class="n">auto</span> <span class="n">Group</span>  <span class="o">=</span> <span class="n">MetaGroup</span><span class="p">::</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;MyGroup&quot;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Decomp.html" class="btn btn-neutral float-left" title="Domain Decomposition (Decomp)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="IO.html" class="btn btn-neutral float-right" title="Parallel IO (IO)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Energy Exascale Earth System Model Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>